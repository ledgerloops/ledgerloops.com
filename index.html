<!doctype html>
<html lang="en">
  <head>
    <title>LedgerLoops: Cryptographically triggered IOUs</title>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <style>
      body { margin: 0px auto; padding: 3em 0em 3em 0em; font:15px sans-serif; line-height:1.4em; width:40em; background-color: #3010B0; color: #FFFFFF }
      h1 { font:75px sans-serif }
      h2 { font:25px sans-serif }
      a { color: #000000 }
      // img { margin: 3em 0em 1em 1em; float: right; box-shadow: 0 0 2em #FFFFFF; border-radius: 1em }
    </style>
  </head>
  <body>
    <!-- img src="./doc/ledgerloops-logo-draft-small.png" / -->
    <a href="https://github.com/ledgerloops"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>

    <h1>LedgerLoops</h1>
    <h2>The Tale of the Whispering Merchants</h2>
      <p>Once upon a time, around an old tree on the village square, a circular wooden bench was made. Merchants would sit on this bench, with their backs to the tree, to seek shade and, of course, trade.</p>
      <p>Each merchant would chat with the person sitting directly to their left, and the person sitting directly to their right. They can't see or directly communicate with anyone beyond their immediate neighbors, and don't trust anybody except their own direct neighbors.</p>
      <p>As the merchants tend to speak in whispers, none of them know exactly how many people are sitting around the tree, nor who the other merchants are, nor what trades they are discussing - except of course, for their own direct neighbors.</p>
      <p>The Whispering Merchants problem arises as follows: each merchant only has an item to offer to their left neighbor, and only desires an item from their right neighbor.</p>
      <p>This creates a deadlock situation, since no two neighboring merchants can barter one-on-one. Some sort of financial technology will be needed, and the merchants start experimenting with different money systems.</p>
      <p>How can each merchant obtain the item they desire from their right neighbor, given that each merchant only has something to offer to their own left neighbor, and doesn't trust anybody except their own two immediate neighbors?</p>

    <h3>Monday: Transitivity of Trust</h3>
      <p>On Monday, one merchant has an idea: he explains to his left neighbor that he is interested in an item from his own right neighbor, and is willing to take a little risk, in everybody's benefit. He offers to <i>lend</i> the item he owns to his left neighbor, in the hope his neighbor would do the same, until his own right neighbor has lent the item he wants to him.
      He promises his left neighbor to cancel the debt once all items have moved one position to the left, in the hope each merchant will do the same, and his own right neighbor will also cancel his own debt. If this goes wrong at any point, and the wave of lending doesn't make it full-circle, the merchants can all just give the items back where they came from.</p>
      <p>This system seems to work at first, and all merchants are happy, until one merchant sees an opportunity to trick the system. Even though he did receive the item he wanted from his right neighbor, he quickly hides it, and tell his left neighbor sorry, I don't know what happened, but it seems the wave of transactions never made it around the tree, so please give me back the item I lent out to you. His left neighbor tells him, OK, I will give you back the item I borrowed from you as soon as I get back the item from my own left neighbor. All merchants ask their item back from their left neighbor, until somewhere someone in the chain decides they have no incentive to reverse the trade they just made, and doesn't cooperate.</p>

      <p>The merchants now realize that this system is very brittle, since it relies on transitivity of trust: even if your own left neighbor would never steal from you, and their left neighbor would never steal from them, this doesn't mean that this third person can also be trusted not to steal from you.</p>

    <h3>Tuesday: Commodity Money</h3>
      <p>Having learned from their first experiment, on Tuesday, the merchants try out a different system. They realize that each of them eats fruits from the tree they're sitting under, and fruits on the tree are getting scarce. They decide to use fruit as a commodity currency. Each merchant offers the item they have for sale to their left neighbor in exchange for one piece of fruit.</p>
     <p>The merchants have invented money, which allows them to make local trades, exchanging an item for a piece of fruit each time. The items all move one merchant to the left, as pieces of fruit are moved to the right.</p>
      <p>Even though this solves the basic problem of the Whispering Merchants, moving fruit around is cumbersome, and the solution breaks down when the value of fruit fluctuates too much.</p>

    <h3>Wednesday: Fiat Money</h3>
      <p>On Wednesday, a banker appears in the village, and gains the trust of all merchants around the tree. He offers fruit vouchers in exchange for fruits, promising to exchange these vouchers back for one piece of fruit per voucher at any point in the future. The merchants start exchanging these vouchers instead of exchanging the cumbersome fruits themselves. The banker keeps a big pile of fruit while the merchants now only exchange pieces of paper whose value depends on the trustworthiness of this one banker. This system works quite well as long as the banker can be trusted not to eat all the fruit.</p>

      <p>This day, all items also successfully move one merchant to the left, and fruit vouchers which all merchants bought from the banker move to the right.</p>
    <h3>Thursday: The Banker's Ledger</h3>
      <p>On Thursday, the banker comes to town holding a notebook and a pen. He offers bank accounts to the merchants, meaning a merchant does not have to carry fruit vouchers as physical pieces of paper, but can also trust the bank to remember how many fruit vouchers the merchant has in his bank account. Such a banker's notebook, which keeps track of how many fruit vouchers are in each merchant's bank account, is called a ledger.</p>
      <p>Instead of giving a piece of paper to his neighbor, a merchant can now instruct the banker to move some fruit vouchers around on the ledger, moving them from his own bank account to the bank account of the other merchant. The banker simply updates the ledger and informs the receiving merchant that a fruit voucher was just deposited in their bank account.</p>

      <p>The banker also allows merchants to let their bank account go below zero. This allows the merchants to trade more, even when they haven't picked any fruits first. The banker soon realizes that, since he has full control over the numbers he writes down on his ledger, he can give out more loans than the number of fruits he actually has stocked, as long as merchants whose bank accounts are above zero don't come and exchange their vouchers for fruits all at the same time.</p>

      <p>This day, all items also successfully move one merchant to the left, and fruit vouchers which all merchants borrowed from the banker move to the right.</p>

      <p>Some merchants whose bank account is very far below zero disappear without paying back their debt to the banker, which means the banker's fruit stock is now too small to ever give all merchants back real pieces of fruit. The merchants all realize this and get nervous, so they ask the banker to exchange their vouchers for fruit, before the banker's stock runs out completely. And so, of course, the banker is out of fruit stock within minutes (the banker has gone bankrupt).</p>

      <p>The merchants learn from this, and realize that if bank loans can so easily lead to an unstable system, then fiat money was maybe also not such an ideal system, since it also relies on trusting a banker instead of just trusting the two merchants sitting directly beside you.</p>

      <p>The mayor of the village restores the banker's fruit stock, in the hope to keep trade around the tree flourishing, and to allow the banker to keep up the beautiful tradition of paying himself a bonus at the end of the year. But the merchants don't really trust the banker anymore, and they are already looking for a better financial technology.</p>

    <h3>Friday: Ledger Federation</h3>
      <p>On Friday, more bankers arrive in the village, and start offering different fruit vouchers. The merchants welcome the arrival of more bankers, as they feel it spreads their risk a little more than having just one banker in the village. However, as it's very impractical to have so many different fruit vouchers, they convince their bankers to accept fruit vouchers from other bankers as well. They also start asking their own banker to move fruit vouchers from their bank account to the bank account of a merchant who is using the services of one of the other bankers. The bankers get together and set up a Unique Node List, which lists one computer from each banker. Together, the computers in this Unique Node List are quite reliable for bankers to exchange each other's fruit vouchers among themselves. The computers make it possible to transfer credit from one banker's ledger to the ledger of a differrent banker. The bankers call this ledger federation.</p>

      <p>The merchants are sad though - they don't really trust any of the bankers, and they are bitter to see how the bankers rely on the bail-out guarantees from the mayor.</p>

    <h3>Saturday: Crypto-currencies</h3>
      <p>On Saturday, one of the merchants realizes they don't need bankers if all they do is own a few computers, and the merchant creates a crypto-currency. He sets up a global public ledger, which runs on a pool of computers. All merchants are allowed to contribute computer time to this pool. That way, the system relies on computers from different persons, who work together to make sure no one person ever steals money from the ledger.</p>
      <p>By contributing computer time, participants obtain coins that can be traded on this ledger. The merchant who created the crypto-coin starts by contributing some computer time himself, to get the system up and running. He first builds up some personal stock of this newly created crypto-coin, and then publishes some software which allows the other merchants to also contribute computer time in exchange for coins. Once a few merchants have obtained some coins, trade in the new crypto-currency can start.</p>

      <p>Although the crypto-coin has no intrinsic value, one merchant starts to offer the item he wants to sell to his left neighbor in exchange for one coin, while at the same time offering one coin for the item his right neighbor is trying to sell.</p>

      <p>As all merchants do this, all transactions are successfully completed, and the coin effectively obtains value.</p>

      <p>Some merchants start to speculate by selling and buying coins at strategic moments, others specialize in getting coins by contributing computer time, and as the scarcity of
      the coin fluctuates, so does its value. When the value is really high, the merchant who invented the crypto-coin sells his personal stock from when he had just created the coin. The coin's value plummets, and all merchants who owned coins at this time, suffer. The merchants decide they don't really trust money seystems in general anymore: granted, money works better than transitivity of trust, but whether commodity money, fiat money, banker's ledgers, or crypto-currencies, using money makes a merchant dependent on the behavior of people other than their immediate neighbors. So they think very hard, trying to come up with an alternative to money altogether.</p>

    <h3>Sunday: LedgerLoops</h3>
      <p>On the seventh day, one of the merchants invents LedgerLoops. What he does is actually quite simple: he creates a cryptographic challenge which he knows only he can solve, but for which anyone could verify and agree whether a given solution is correct. He tells his left neighbor: I will give you this item if you can show me the solution of this cryptographic challenge. Each merchant tells his left neighbor the same, until the initiator's own right neighbor does so. After this, the correct solution is sent back in the other direction, and all trades are completed.</p>
      <p>The bankers start offering participation in LedgerLoops as a service to merchants, meaning more trades become possible. The route along which value moves no longer needs to be exactly a full loop around the tree, but can also take shortcuts via a banker.</p>
      <p>Merchants no longer need to ask their banker to move fruit vouchers from their bank account to another merchant's bank account, or even know if the other merchant has an account at a banker who cooperates with their own banker; they just see if a LedgerLoop exists that passes through their own banker on one side, and through their neighbor merchant on the other side. So although they still need to trust bankers who act as their neighbors in a LedgerLoop, they no longer rely on bankers to issue fruit vouchers.</p>
      <p>The mayor is also happy about this, because it means that although merchants still rely on bankers as a safe value store and as a source of bank loans, they no longer rely so heavily on banker's vouchers for facilitating trade.</p>

    <h2>An Alternative to Money</h2>
    <p>Remember that money is used to decompose a flow of value into a chain of local transactions: when using money, each merchant participates in one purchase (giving money to their right neighbor in exchange for an item), and one sale (obtaining money from their left neighbor in exchange for an item). Each merchant only accepts the money from their left neighbor because they hope their right neighbor will probably accept this same money as a currency. This means the use of money requires the merchant to make assumptions about the future behavior of people they don't really trust.</p>
    <p>LedgerLoops is an alternative solution to the Whispering Merchants problem, which does not rely on any globally coordinated currency. When the solution to the challenge is passed around the tree, the solution allows each merchant to obtain one item, but the solution does not itself represent any value. The solution to a LedgerLoops challenge does not act as a cryptographic coin. It only acts a a cryptographic trigger.</p>
    <p>This means that LedgerLoops, as a financial technology, is not just an alternative money system. It proposes a more profound departure from money-as-we-know it, with a potentially more disruptive impact on the way assets change hands. It is an alternative <i>to</i> money altogether.</p>

    <h2>Where can I get LedgerLoops software?</h2>
    <p>Good question! :) First of all, the story of the Whispering Merchants is of course fictional, and LedgerLoops was not invented by a merchant under a tree. As an invention, it is hereby published free of patents, by <a href="https://michielbdejong.com">Michiel de Jong</a>.</p>
    <p>In order to use LedgerLoops in practice, you will need software. Currently, no such software exists yet.</p>
    <p>You can contribute to the open source development of LedgerLoops software (including reusable software components) via <a href="https://github.com/ledgerloops">LedgerLoops on GitHub</a>. We'll tweet from <a href="https://twitter.com/ledgerloops">@LedgerLoops</a> to announce when beta versions of this software become available, so follow <a href="https://twitter.com/ledgerloops">@LedgerLoops on Twitter</a> to stay up to date!</p>
    <p>You're also welcome to make your own closed-source software "LedgerLoops-compatible". As long as you don't directly call your software "LedgerLoops", you're welcome to claim that it's "LedgerLoops-compatible". Since LedgerLoops is patent-free, anybody will be allowed to build LedgerLoops-compatible software without prior permission. We might create a test suite to certify compatibility, if people are interested in that.</p>
    <p>To read about the technical details of the LedgerLoops messaging protocol, please download the <a href="/doc/whitepaper.pdf">LedgerLoops whitepaper (pdf)</a>.</p>

    <h2>About the Author</h2>
      <p>You may know <a href="https://twitter.com/michielbdejong">@michielbdejong</a> from his earlier work attempting to <a href="http://redecentralize.org">Redecentralize the Internet</a>, for instance:</p>
      <img src="./doc/michiel.png" style="float:right;border-radius:2em">
      <ul>
        <li>Firefox OS Data Sync (at <a href="https://www.mozilla.org">Mozilla</a>)</li>
        <li><a href="https://tosdr.org">Terms of Service; Didn't Read</a> (co-founder)</li>
        <li><a href="http://unhosted.org">Unhosted Web Apps</a> project</li>
        <li><a href="https://remotestorage.io">remoteStorage</a> (spec author)</li>
        <li><a href="https://indiehosters.net">IndieHosters</a> (co-founder)</li>
        <li>Currently <a href="https://www.linkedin.com/in/michielbdejong">available for hire</a></li>
      </ul>
    </p>
  </body>
</html>
